<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Documents par machine</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { font-family: Arial, sans-serif; background: #f4f6f8; padding: 20px; }
h1 { color: #2c3e50; }
h2 { color: #34495e; margin-top: 20px; }
h3 { color: #2c3e50; margin-top: 10px; }
ul { list-style: none; padding-left: 0; }
li { background: #ecf0f1; margin: 8px 0; padding: 10px; border-radius: 5px; }
a { text-decoration: none; color: #2980b9; font-weight: bold; }
a:hover { text-decoration: underline; }
</style>
</head>
<body>

<h1>ğŸ“„ Embouteillage Ligne A</h1>
<div id="content">Chargement...</div>

<script>
const content = document.getElementById("content");
const params = new URLSearchParams(window.location.search);
const machine = params.get("machine");

fetch("data.json")
  .then(res => {
    if (!res.ok) {
      throw new Error("HTTP " + res.status + " â€“ data.json introuvable");
    }
    return res.json();
  })
  .then(data => {
    if (!machine) {
      content.innerHTML = "<p>âŒ ParamÃ¨tre ?machine manquant</p>";
      return;
    }
    if (!data[machine]) {
      content.innerHTML = "<p>âŒ Machine inconnue : " + machine + "</p>";
      return;
    }

    content.innerHTML = `<h2>${machine}</h2>`;
    for (const folder in data[machine]) {
      const h3 = document.createElement("h3");
      h3.textContent = folder.replaceAll("_", " ");
      content.appendChild(h3);

      const ul = document.createElement("ul");
      data[machine][folder].forEach(item => {
        const li = document.createElement("li");
        li.innerHTML = `ğŸ“„ <a href="${item.file}" target="_blank">${item.name}</a>`;
        ul.appendChild(li);
      });
      content.appendChild(ul);
    }
  })
  .catch(err => {
    console.error(err);
    content.innerHTML = "<p>âŒ ERREUR : " + err.message + "</p>";
  });
</script>

</body>
</html>










